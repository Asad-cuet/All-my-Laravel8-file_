1.create new project

2.connect database

3.create ui system  //don't migrate now

4.modify user migration:

      add:$table->tinyInteger('role_as')->default('0');

      add the column manually in database

5.migrate now


6.admin middleware:

      php artisan make:middleware AdminMiddleware


7.replace in middleware:

      use Illuminate\Support\Facades\Auth;
      public function handle($request, Closure $next)
    {
        if(Auth::check())
        {
            if(Auth::user()->role_as == '1')
            {
                return $next($request);
            }
            else
            {
                return redirect('/home')->with('status','Access Denied! as you are not as admin');
            }
        }
        else
        {
            return redirect('/home')->with('status','Please Login First');
        }
    }


   


8.Kernel.php:


    protected $routeMiddleware = [

        'isAdmin' => \App\Http\Middleware\AdminMiddleware::class, //Add to the end
    ];


9.Controllers/Auth/LoginController.php:

       comment $redirectTo

       paste:   
     use Illuminate\Support\Facades\Auth; 
    protected function authenticated()
    {
        if(Auth::user()->role_as == '1') //1 = Admin Login
        {
            return redirect('dashboard')->with('status','Welcome to your dashboard');
        }
        elseif(Auth::user()->role_as == '0') // Normal or Default User Login
        {
            return redirect('/')->with('status','Logged in successfully');
        }
    }


     import Auth class [click>right-button,import class]


10.web.php:

      Route::middleware(['auth','isAdmin'])->group(function () {

            Route::get('/dashboard', function () {
                 return view('admin.dashboard');   //temporally use:return "Admin Login";
                                  });

          });

11.edit role_as value in user table.create a new user as normal user

Note:Now admin login redirect to different route from user


12.Integrate Admin Dashboard:

     template link:https://github.com/creativetimofficial/material-dashboard-bs4
     web link:https://demos.creative-tim.com/

     new file:views/layouts/admin.blade.php

     new folder:public/admin/css/:paste template 'material..css'

     new folder:public/admin/js/:paste template core js all' and plugin/perfect-scrollbar.jqu..js


     new:layout/inc/
            sidebar.blade.php:paste sidebar   modify tilte, replace href="#"
            adminnav.blade.php:paste navbar
            adminfooter.blade.php:paste footer


     admin.blade.php:                      // asset('') redirect:public/
             copy paste from app.blade.php 
             clear body
             replace font link from template dashboard
             replace css links
             take <div class="wrapper">all content here</div>
             @include('layouts.inc.sidebar')
             <div class="main-panel">
             @include('layouts.inc.adminnav')
             <div class="content">@yield('content')</div>                  <!-- includinh blade component -->
             @include('layouts.inc.adminfooter')
             </div>

             paste core js files (all).modify src value
             @yield('scripts')


     new:views/admin/dashboard.blade.php:
             @extends('layouts.admin')                                     <!-- showing main component  -->
             
             @section('content')
                 .card>.card-body><h1>Welcome to dashboard</h1>
             @endsection

    replace logout button from app.blade.php with <form>

Note:get login as admin



13.Add Category table+Page:

     php artisan make:model Category -m

     paste on migration:
       $table->string('name');
       $table->string('slug');
       $table->longText('description');
       $table->tinyInteger('status')->default('0');
       $table->tinyInteger('popular')->default('0');
       $table->string('image')->default(null);
       $table->string('meta_title');
       $table->string('meta_descript');
       $table->string('meta_keywords');


     model:
         protected $table='categories';
         protected $fillable=['name','slug','description','status','popular','image','meta_title','meta_descrip','meta_keywords'];


     php artisan migrate

     new:views/admin/category/index.blade.php:
             @section('content')
                 .card>.card-body><h1>Cateogry</h1>
             @endsection


     php artisan make:controller Admin/CategoryController:
                 index() {
                    return view('admin.category.index');
                          }

     php artisan make:controller Admin/DashboardController:
                 index() {
                    return view('admin.dashboard');
                          }


     edit:

        Route::get('/dashboard','Admin\DashboardController@index');

     add:
        Route::get('/categories','Admin\CategoryController@index');

 
     register controller for not include class:
          providers/RouteServiceProvider.php: uncomment $namespace


     edit sidebar>category url:
                  href="{{ url('/categories') }}"
 


14.Integrate Category with your ajax


15.Active navbar button:<li class="{{Request::is('categories') ? 'active':'' }}">  //if url=/categories


16.Add Product table+page:


      php artisan make:model Product -m



      migration:
                $table->bigInteger('cate_id');
                $table->string('name');
                $table->string('slug')->default(null);
                $table->mediumText('small_description');
                $table->longText('description');
                $table->string('original_price');
                $table->string('selling_price');
                $table->string('image')->default(null);
                $table->string('qty');
                $table->string('tax');
                $table->tinyInteger('status');
                $table->tinyInteger('trending');
                $table->mediumText('meta_title');
                $table->mediumText('meta_keywords');
                $table->mediumText('meta_descript');


      model:
              protected $table='products';
              protected $fillable=['cate_id','name','slug','small_description','description','original_price','selling_price','image','tax','status','trending','meta_title','meta_keywords','meta_descript'];



              public function category()  //making relationship
                {
                     return $this->belongsTo(Category::class,'cate_id','id');
                }


     do as Category


     public function insert_form()
        {
            $category=Category::all();
            return view('admin.product.add',['category'=>$category]);
        }   


      <div class="col-md-12 mb-3">
                  <select class="form-select" aria-label="Default select example">
                        <option selected>Open this select menu</option>
                        @foreach($category as $item)
                        <option value="{{$item->id}}">{{$item->name}}</option>
                        @endforeach
                  </select>
       </div>      


       fetch category:
            {{$item->category->name}}   



17.Frontend Layout:

       new:layouts/frontend.blade.php:paste from admin,clear except links,modify link(use bootstrap) location,add on ul class="ms-auto",replace navbar class>dark
       new:viws/frontend/dashboard.blade.php:do as admin dashboard
       new:public/frontend/css & js
       new:layouts/front_inc/:
                           front_navbar.blade.php:use bootstrap,rename,remove fluid class,add on ul class="ms-auto",replace navbar class>dark
                           slider.blade.php:use bootstrap,edit href="assets/images/.."


       include front_inc.navbar in layouts/frontend
       include front.slider in views/frontend/dashboard

       php artisan make:controller Frontend/FrontendController:
                             index() 
                             {
                                     $featured_product=Product::where('trending','1')->take(15)->get();
                                     return view('frontend/dashboard',['feteaured_product'=>$featured_product]);
                             }
 
       web.php:
               Route::get('/','Frontend/FrontendController@index');



18.Product Slider:[web link:https://owlcarousel2.github.io/OwlCarousel2/]

    include in layouts/frontend:
       <link rel="stylesheet" href="owlcarousel/owl.carousel.min.css">
       <link rel="stylesheet" href="owlcarousel/owl.theme.default.min.css">

       <script src="jquery.min.js"></script>  
       <script src="owlcarousel/owl.carousel.min.js"></script>


    dashboard.blade.php:

    <div class="py-5">
      <div class="container">
            <div class="row">
                  <h2>Feteared Product</h2>
                  <div class="owl-carousel featured-carousel owl-theme">
                        @foreach ($feteaured_product as $item)
                              <div class="item">
                                    <div class="card">
                                          <img src="{{asset('assets/uploads/product/'.$item->image)}}" alt="Product Image">
                                          <div class="card-body">
                                                <h5>{{$item->name}}</h5>
                                                <span class="float-start">{{$item->selling_price}}</span>
                                                <span class="float-end"><s>{{$item->original_price}}</s></span>
                                          </div>
                                    </div>
                              </div>
                        @endforeach
                  </div>
            </div>
      </div>
    </div>


     also:
            @section('scripts')
            <script>
                  $('.featured-carousel').owlCarousel({
                        loop:true,
                        margin:10,
                        responsiveClass:true,
                        responsive:{
                        0:{
                              items:1,
                              nav:true
                        },
                        600:{
                              items:3,
                              nav:false
                        },
                        1000:{
                              items:5,
                              nav:true,
                              loop:false
                        }
                        }
                  })

            </script> 
            @endsection


19.All category page:


             add in navbar

             new:frontend/category.blade.php:add web,cont.
            
   cont:
    public function category() 
    {
        $category=Category::all();
        return view('frontend/category',['category'=>$category]);

    }


   category-blade shape:


<div class="py-5">
      <div class="container">
            <div class="row">
                  <h2>All Categories</h2>
                  
                        @foreach ($category as $item)
                             
                              <div class="col-md-3 mb-3">
                                    <a href="{{url('category/'.$item->slug)}}" >
                                    <div class="card">
                                          <img src="{{asset('assets/uploads/category/'.$item->image)}}" alt="Product Image">
                                          <div class="card-body">
                                                <h5>{{$item->name}}</h5>
                                          </div>
                                    </div>
                                    </a>
                              </div>
                        @endforeach
                  
            </div>
      </div>
</div>






20.view-category:

             new:frontend/view-category.blade.php:add web,cont.

   cont:
    public function view_category($slug) 
    {
        if($category=Category::where('slug',$slug)->exists())
        {
            $category=Category::where('slug',$slug)->first();
            $product=Product::where('cate_id',$category->id)->orderBy('id','DESC')->get();
            return view('frontend/view-category',['product'=>$product,'category'=>$category]);
        }
        else
        {
            return view('frontend/dashboard')->with("status","Slug doesn't exist");
        }
        

    }
 

<div class="py-5">
      <div class="container">
            <div class="row">
                  <h2>{{$category->name}}</h2>
                 
                        @foreach ($product as $item)
                              <div class="col-md-3 mb-3">
                                    <a href="{{url('category/'.$item->category->slug.'/'.$item->slug)}}">
                                    <div class="card">
                                          <img src="{{asset('assets/uploads/product/'.$item->image)}}" alt="Product Image">
                                          <div class="card-body">
                                                <h5>{{$item->name}}</h5>
                                                <span class="float-start">{{$item->selling_price}}</span>
                                                <span class="float-end"><s>{{$item->original_price}}</s></span>
                                          </div>
                                    </div>
                                    </a>      

                              </div>
                        @endforeach
                  
            </div>
      </div>
</div>


21.Add trending category in dashboard:

           cont:
    public function index() 
    {
        $feteared_product=Product::where('trending','1')->take(15)->get();
        $trending_category=Category::where('popular','1')->take(15)->get();
        return view('frontend/dashboard',['feteaured_product'=>$feteared_product,'trending_category'=>$trending_category]);

    }
  
   paste feteaured product box in dashboard blade


22.Make view-product:

       new:viws/frontend/view-product.blade.php

       <a href="{{url('category/'.$item->category->slug.'/'.$item->slug)}}">

       web:Route::get('category/{cate_slug}/{prod_slug}','Frontend\FrontendController@view_product');


  cont:
    public function view_product($cate_slug,$prod_slug)
    {
        if(Category::where('slug',$cate_slug)->exists())
        {
            if(Product::where('slug',$prod_slug->exists))
            {
                $product=Product::where('slug',$prod_slug)->first();
                return view('frontend/view-product',['product'=>$product]);
            }
            else
            {
                return view('frontend/view-product')->with('status','No such product found');
            }
        }
        else
        {
        return view('frontend/view-product')->with('status','No such Category found');
        }
    }

   blade box:

@section('content')
 <div class="py-3 mb-4 shadow-sm bg-warning border-top">
      <div class="container">
            <h6 class="mb-0">{{$product->category->name}}</h6>      
      </div>       
</div>      


<div class="container">
      <div class="card shadow">
            <div class="card-body">
                  <div class="row">
                        <div class="col-md-4 border-roght">
                              <img src="{{asset('assets/uploads/product/'.$product->image)}}" alt="image" class="w-100">
                        </div>
                        <div class="col-md-8">
                              <h2 class="mb-0">
                                    {{$product->name}}
                                    <label style="font-size:16px;" class="float-end badge bg-danger trending_tag">{{$product->trending==1 ? 'Trending':''}}</label>
                              </h2>
                              <hr>
                              <label class="me-3">Original Price: <s>Rs 1200</s></label>
                              <label class="fw-bold">Selling Price: Rs 1200</label>
                              <p class="mt-3">
                                    {{$product->small_description}}     
                              </p>
                              <hr>
                              @if($product->qty>0)
                                    <label class="badge bg-success">In stock</label>
                              @else       
                                    <label class="badge bg-danger">In stock</label> 
                              @endif
                              <div class="row mt-2">
                                     <div class="col-md-3">
                                                <label for="quantity">Quantity</label>
                                                <div class="input-group text-center mb-3" style="width:130px;">
                                                       <button class="input-group-text">-</button>
                                                       <input type="text" name="quantity" value="1" class="form-control text-center" />
                                                       <button class="input-group-text">+</button>      
                                                </div>       
                                    </div> 
                                    <div class="col-md-9">
                                          <br/>
                                          <button type="button" class="btn btn-success me-3 float-start">Add to Wishlist</button>      
                                          <button type="button" class="btn btn-primary me-3 float-start">Add to Wishlist</button>      
                                    </div>     
                              </div>      
                        </div>
                  </div>
            </div>
      </div>
</div>



@endsection




23.Integrate Google fonts and font awesome:
 
     in layouts.frontend.blade.php:
                  <link rel="preconnect" href="https://fonts.googleapis.com">
                  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">


                  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css" integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin="anonymous">

    add after Add to Wishlist<i class="fa fa-heart"></i>
    add after Add to Cart<i class="fa fa-shopping-cart"></i>


24.Button Increment decrement:


       add class=decrement-btn/increment-btn
       add on input class="qty qty-input"


   <script>
   $(document).ready(function(){
         $('.increment-btn').click(function(e){
               e.preventDefault();

               var inc_value=$('.qty-input').val();
               var value=parseInt(inc_value,10);
               value=isNaN(value) ? 0:value;
               if(value<10)
               {
                     value++;
                     $('.qty-input').val(value);
               }
         });


         $('.decrement-btn').click(function(e){
               e.preventDefault();

               var dec_value=$('.qty-input').val();
               var value=parseInt(dec_value,10);
               value=isNaN(value) ? 0:value;
               if(value>1)
               {
                     value--;
                     $('.qty-input').val(value);
               }
         });
   });
   </script>
       



25.Add to Cart activate:

      php artisan make:model Cart -m

      migration:
          $table->string('user_id');
          $table->string('prod_id');
          $table->string('prod_qty');

     model:
      protected $table='carts';
      protected $fillable=['user_id','prod_id','prod_qty'];
    public function product()  //making relationship
    {
         return $this->belongsTo(Product::class,'prod_id','id');
    }

     migrate now

     php artisan make:contrller Frontend/CartController


     view_product.blade.php:
          add:
             input class="addToCartBtn"
             add beside card class="product_data"
             <input type="hidden" value="{{$product->id}}" class="prod_id">
              


          <script>   
         $('.addToCartBtn').click(function(e){
               e.preventDefault();
               var product_id=$(this).closest('.product_data').find('.prod_id').val();
               var product_qty=$(this).closest('.product_data').find('.qty-input').val();
               

               $.ajaxSetup({     //has extra code on head:<meta name="csrf-token" content="{{ csrf_token() }}">
                  headers: {
                        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                  }
               });


               $.ajax({
                     method:"POST",
                     url:"/add-to-cart",
                     data:{
                           'product_id':product_id,
                           'product_qty':product_qty,
                     },
                     success:function(response) {
                          swal(response.status);
                     }
               });
            });
         </script>

    
    web:Route::post('/add-to-cart','Frontend\CartController@addProduct');


    cont:

    use Illuminate\Support\Facades\Auth;
    public function addProduct(Request $request)
    {
          $product_id=$request->input('product_id');
          $product_qty=$request->input('product_qty');

          if(Auth::check())
          {
              $prod_check=Product::where('id',$product_id)->first();
              if($prod_check)
              {
                  if(Cart::where('prod_id',$product_id)->where('user_id',Auth::id())->exists())
                  {
                    return response()->json(['status'=>$prod_check->name.' Already Added to Cart']);
                  }
                  else
                  {
                  $cartItem=new Cart();
                  $cartItem->user_id=Auth::id();
                  $cartItem->prod_id=$product_id;
                  $cartItem->prod_qty=$product_qty;
                  $cartItem->save();
                  return response()->json(['status'=>$prod_check->name.' Added to Cart']);
                  }
              }
          }
          else
          {
              return response()->json(['status'=>'Login to Continue']);
          }
    }


26.Add login registrate user button on navbar from app.blade.php,home button from welcome.blade.php



27.Cart Page+increment/drement+remove button:
    
***     add cart button on navbar

***     new:views/frontend/cart.blade.php:



***    public function viewCart()
    {
        $product=Cart::orderBy('id','DESC')->get();
        return view('frontend.cart',['product'=>$product]);
    }


****     script:   //this incre/decre script you can use also in view-product.better you should take all it in custom.js file.I took

<script>
$('.increment-btn').click(function(e){
      e.preventDefault();

      var inc_value=$(this).closest('.product_data').find('.qty-input').val();
      var value=parseInt(inc_value,10);
      value=isNaN(value) ? 0:value;
      if(value<10)
      {
            value++;
            $(this).closest('.product_data').find('.qty-input').val(value);
      }
});


$('.decrement-btn').click(function(e){
      e.preventDefault();

      var dec_value=$(this).closest('.product_data').find('.qty-input').val();
      var value=parseInt(dec_value,10);
      value=isNaN(value) ? 0:value;
      if(value>1)
      {
            value--;
            $(this).closest('.product_data').find('.qty-input').val(value);
      }
});


$('.delete-cart-item').click(function(e){
      e.preventDefault();

      var cart_id=$(this).closest('.product_data').find('.cart_id').val();

      $.ajaxSetup({
                  headers: {
                        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                  }
      });



      $.ajax({
            method:"POST",
            url:"/delete-cart-item",
            data:{
                  'cart_id':cart_id
            },
            success:function(response) {
                swal("",response.status, "success");
            }
      });

});

</script>


****  web:

Route::middleware('auth')->group(function() {
    Route::get('/cart','Frontend\CartController@viewCart')->name('cart');
    Route::post('/delete-cart-item','Frontend\CartController@deleteCartItem');
});

 
 
****  cont:


    public function viewCart()
    {
        $product=Cart::where('user_id',Auth::id())->orderBy('id','DESC')->get();
        return view('frontend.cart',['product'=>$product]);
    }


    public function deleteCartItem(Request $request)
    {
        $cart_id=$request->input('cart_id');
        $cartItem=Cart::where('id',$cart_id)->first();
        $cartItem->delete();
        return response()->json(['status'=>'Product Deleted Successfully']);
    }
        

    

